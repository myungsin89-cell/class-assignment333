<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•™ìƒ ê´€ë¦¬ ì‹œìŠ¤í…œ - ìë™ ë°°í¬</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 32px;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 16px;
        }

        .info-box {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin-bottom: 30px;
            border-radius: 5px;
        }

        .info-box h3 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 18px;
        }

        .info-box ul {
            margin-left: 20px;
            color: #555;
        }

        .info-box li {
            margin-bottom: 8px;
            line-height: 1.5;
        }

        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
            font-size: 14px;
        }

        input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e4e8;
            border-radius: 8px;
            font-size: 15px;
            transition: border-color 0.3s;
        }

        input:focus {
            outline: none;
            border-color: #667eea;
        }

        .deploy-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-bottom: 15px;
        }

        .deploy-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .deploy-btn:active {
            transform: translateY(0);
        }

        .quick-deploy {
            text-align: center;
            margin-top: 30px;
            padding-top: 30px;
            border-top: 2px solid #e1e4e8;
        }

        .quick-deploy h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .vercel-btn {
            display: inline-block;
            padding: 12px 30px;
            background: black;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            transition: background 0.3s;
        }

        .vercel-btn:hover {
            background: #333;
        }

        .env-item {
            background: white;
            border: 1px solid #e1e4e8;
            border-radius: 5px;
            padding: 12px;
            margin-bottom: 10px;
        }

        .env-label {
            font-weight: 600;
            color: #667eea;
            font-size: 12px;
            margin-bottom: 5px;
        }

        .env-value {
            font-family: 'Courier New', monospace;
            font-size: 13px;
            color: #333;
            word-break: break-all;
            background: #f6f8fa;
            padding: 8px;
            border-radius: 4px;
            margin-bottom: 8px;
        }

        .copy-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 5px;
            font-size: 12px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .copy-btn:hover {
            background: #5568d3;
        }

        .copy-btn.copied {
            background: #10b981;
        }

        /* íŒì—… ì˜¤ë²„ë ˆì´ */
        .popup-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 9999;
            justify-content: center;
            align-items: center;
        }

        .popup-overlay.show {
            display: flex;
        }

        .popup-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .popup-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .popup-title {
            color: #667eea;
            font-size: 24px;
            font-weight: bold;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: #999;
            line-height: 1;
            padding: 0;
            width: 32px;
            height: 32px;
        }

        .close-btn:hover {
            color: #333;
        }

        .warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin-top: 20px;
            border-radius: 5px;
            color: #856404;
            font-size: 14px;
        }

        .step {
            display: flex;
            align-items: start;
            margin-bottom: 15px;
        }

        .step-number {
            background: #667eea;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .step-content {
            flex: 1;
        }

        .step-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }

        .step-desc {
            color: #666;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“ í•™ìƒ ê´€ë¦¬ ì‹œìŠ¤í…œ</h1>
        <p class="subtitle">í´ë¦­ í•œ ë²ˆìœ¼ë¡œ ë‚˜ë§Œì˜ ì•±ì„ ë°°í¬í•˜ì„¸ìš”</p>

        <div class="info-box">
            <h3>ğŸ“¦ í¬í•¨ëœ ê¸°ëŠ¥</h3>
            <ul>
                <li>í•™ìƒ ì •ë³´ ê´€ë¦¬ ì‹œìŠ¤í…œ</li>
                <li>PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ (Neon ì—°ë™)</li>
                <li>Next.js 14 ê¸°ë°˜</li>
                <li>ì™„ì „íˆ ë…ë¦½ì ì¸ ë°°í¬</li>
            </ul>
        </div>

        <div class="info-box">
            <h3>ğŸš€ ë°°í¬ ê°€ì´ë“œ (ìˆœì„œëŒ€ë¡œ ì§„í–‰í•˜ì„¸ìš”)</h3>
            <div class="step">
                <div class="step-number">1</div>
                <div class="step-content">
                    <div class="step-title">Neon Console ì ‘ì†</div>
                    <div class="step-desc">Google ë¡œê·¸ì¸ â†’ ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±</div>
                </div>
            </div>
            <div class="step">
                <div class="step-number">2</div>
                <div class="step-content">
                    <div class="step-title">DATABASE_URL ë³µì‚¬</div>
                    <div class="step-desc">Connection Stringì„ ì´ í˜ì´ì§€ì— ë¶™ì—¬ë„£ê¸°</div>
                </div>
            </div>
            <div class="step">
                <div class="step-number">3</div>
                <div class="step-content">
                    <div class="step-title">Vercel ë°°í¬</div>
                    <div class="step-desc">ë°°í¬ ë²„íŠ¼ í´ë¦­ â†’ íŒì—…ì˜ í™˜ê²½ ë³€ìˆ˜ ë³µì‚¬</div>
                </div>
            </div>
        </div>

        <!-- Step 1: GitHub URL -->
        <div class="info-box" style="background: #e8f4f8; border-color: #667eea;">
            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                <div style="background: #667eea; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold;">1</div>
                <h3 style="color: #667eea; margin: 0;">GitHub ì €ì¥ì†Œ</h3>
            </div>
            <div class="form-group" style="margin-bottom: 0;">
                <input
                    type="text"
                    id="github-url"
                    placeholder="https://github.com/choimin1243/first123"
                    value="https://github.com/choimin1243/first123/tree/song"
                >
            </div>
        </div>

        <!-- Step 2: Neon DB -->
        <div class="info-box" style="background: #fff9e6; border-color: #ffc107;">
            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                <div style="background: #ffc107; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold;">2</div>
                <h3 style="color: #f59e0b; margin: 0;">Neon ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±</h3>
            </div>
            <button class="deploy-btn" onclick="openNeonConsole()" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); margin-bottom: 15px;">
                ğŸ”— Neon Console ì—´ê¸°
            </button>
            <div class="form-group" style="margin-bottom: 0;">
                <label for="database-url">DATABASE_URL ì…ë ¥</label>
                <input
                    type="text"
                    id="database-url"
                    placeholder="1. Neon Consoleì—ì„œ Google ë¡œê·¸ì¸ â†’ 2. í”„ë¡œì íŠ¸ ìƒì„± â†’ 3. Connection String ë³µì‚¬ â†’ 4. ì—¬ê¸°ì— ë¶™ì—¬ë„£ê¸°"
                >
                <small style="color: #856404; font-size: 12px; display: block; margin-top: 5px;">
                    âš ï¸ ë¨¼ì € ìœ„ì˜ "Neon Console ì—´ê¸°" ë²„íŠ¼ì„ í´ë¦­í•´ì„œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìƒì„±í•˜ì„¸ìš”
                </small>
            </div>
        </div>

        <!-- Step 3: API Key (Optional) -->
        <div class="info-box" style="background: #f3f4f6; border-color: #9ca3af;">
            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                <div style="background: #9ca3af; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold;">3</div>
                <h3 style="color: #6b7280; margin: 0;">API Key (ì„ íƒì‚¬í•­)</h3>
            </div>
            <div class="form-group" style="margin-bottom: 0;">
                <input
                    type="text"
                    id="api-key"
                    placeholder="CG-xxxxxxxxxxxxxxxxxxxx (ë¹„ì›Œë‘ì–´ë„ ë©ë‹ˆë‹¤)"
                >
                <small style="color: #6b7280; font-size: 12px; display: block; margin-top: 5px;">
                    ğŸ’¡ CoinGecko ë¬´ë£Œ ë²„ì „ì€ API í‚¤ê°€ í•„ìš” ì—†ìŠµë‹ˆë‹¤
                </small>
            </div>
        </div>

        <!-- Step 4: Deploy -->
        <div style="margin-top: 20px;">
            <button class="deploy-btn" onclick="deployToVercel()" id="deploy-button">
                ğŸš€ Vercelì— ë°°í¬í•˜ê¸°
            </button>
        </div>

        <div class="warning">
            <strong>ğŸ“‹ ë°°í¬ ìˆœì„œ:</strong><br>
            1ï¸âƒ£ <strong>Neon Console ì—´ê¸°</strong> â†’ Google ë¡œê·¸ì¸ â†’ DB ìƒì„±<br>
            2ï¸âƒ£ <strong>DATABASE_URL ë³µì‚¬</strong> â†’ ìœ„ì˜ ì…ë ¥ë€ì— ë¶™ì—¬ë„£ê¸°<br>
            3ï¸âƒ£ <strong>API Key ì…ë ¥</strong> (ì„ íƒì‚¬í•­)<br>
            4ï¸âƒ£ <strong>ë°°í¬ ë²„íŠ¼ í´ë¦­</strong> â†’ Vercelì—ì„œ ìë™ ë°°í¬ ì‹œì‘<br>
            5ï¸âƒ£ <strong>íŒì—…ì°½ì—ì„œ í™˜ê²½ ë³€ìˆ˜ ë³µì‚¬</strong> â†’ Vercelì— ë¶™ì—¬ë„£ê¸°
        </div>

    </div>

    <!-- íŒì—…ì°½ -->
    <div id="popup-overlay" class="popup-overlay" onclick="closePopup(event)">
        <div class="popup-content" onclick="event.stopPropagation()">
            <div class="popup-header">
                <h2 class="popup-title">ğŸ“‹ í™˜ê²½ ë³€ìˆ˜ ê°’</h2>
                <button class="close-btn" onclick="closePopup()">&times;</button>
            </div>

            <p style="color: #666; margin-bottom: 20px;">
                âœ… Vercel í˜ì´ì§€ê°€ ìƒˆ ì°½ì— ì—´ë ¸ìŠµë‹ˆë‹¤<br>
                ğŸ‘‡ ì•„ë˜ ê°’ë“¤ì„ ë³µì‚¬í•´ì„œ Vercelì˜ í™˜ê²½ ë³€ìˆ˜ í•„ë“œì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”
            </p>

            <div class="env-item">
                <div class="env-label">DATABASE_URL</div>
                <div id="popup-db-url" class="env-value"></div>
                <button class="copy-btn" onclick="copyToClipboard('popup-db-url', this)">ğŸ“‹ ë³µì‚¬</button>
            </div>

            <div class="env-item" id="popup-api-key-item">
                <div class="env-label">NEXT_PUBLIC_COINGECKO_API_KEY</div>
                <div id="popup-api-key" class="env-value"></div>
                <button class="copy-btn" onclick="copyToClipboard('popup-api-key', this)">ğŸ“‹ ë³µì‚¬</button>
            </div>

            <div style="margin-top: 20px; padding: 15px; background: #f0f9ff; border-radius: 8px; border-left: 4px solid #667eea;">
                <strong style="color: #667eea;">ğŸ“ ë‹¤ìŒ ë‹¨ê³„:</strong><br>
                <ol style="margin: 10px 0 0 20px; color: #555;">
                    <li>Vercel í˜ì´ì§€ì—ì„œ DATABASE_URL í•„ë“œ í´ë¦­</li>
                    <li>ìœ„ì˜ "ğŸ“‹ ë³µì‚¬" ë²„íŠ¼ìœ¼ë¡œ ê°’ ë³µì‚¬ í›„ ë¶™ì—¬ë„£ê¸°</li>
                    <li>Deploy ë²„íŠ¼ í´ë¦­!</li>
                </ol>
                <p style="margin: 10px 0 0 0; color: #666; font-size: 13px;">
                    ğŸ’¡ <strong>API KeyëŠ” ë‚˜ì¤‘ì— ì¶”ê°€ ê°€ëŠ¥:</strong> Vercel Dashboard â†’ Settings â†’ Environment Variables
                </p>
            </div>
        </div>
    </div>

    <script>
        function openNeonConsole() {
            // Neon Console ì—´ê¸°
            window.open('https://console.neon.tech/', '_blank');

            // ì•ˆë‚´ ë©”ì‹œì§€
            setTimeout(() => {
                alert('ğŸ“ Neon Console ì‚¬ìš© ê°€ì´ë“œ:\n\n1. Google ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸\n2. "Create a project" í´ë¦­\n3. í”„ë¡œì íŠ¸ ì´ë¦„ ì…ë ¥ (ì˜ˆ: my-student-system)\n4. ìƒì„± ì™„ë£Œ í›„ "Connection Details" ì„¹ì…˜ ì°¾ê¸°\n5. "Connection string" ë³µì‚¬\n6. ì´ í˜ì´ì§€ë¡œ ëŒì•„ì™€ì„œ DATABASE_URLì— ë¶™ì—¬ë„£ê¸°');
            }, 1000);
        }

        function deployToVercel() {
            const githubUrl = document.getElementById('github-url').value.trim();
            const databaseUrl = document.getElementById('database-url').value.trim();
            const apiKey = document.getElementById('api-key').value.trim();

            // GitHub URL ê²€ì¦
            if (!githubUrl.includes('github.com')) {
                alert('ì˜¬ë°”ë¥¸ GitHub URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”');
                return;
            }

            // DATABASE_URL ê²€ì¦
            if (!databaseUrl) {
                const openNeon = confirm('âš ï¸ DATABASE_URLì´ ì…ë ¥ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤!\n\nìˆœì„œ:\n1. "Neon Console ì—´ê¸°" ë²„íŠ¼ í´ë¦­\n2. Google ë¡œê·¸ì¸\n3. ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±\n4. Connection String ë³µì‚¬\n5. DATABASE_URL í•„ë“œì— ë¶™ì—¬ë„£ê¸°\n\nì§€ê¸ˆ Neon Consoleì„ ì—¬ì‹œê² ìŠµë‹ˆê¹Œ?');

                if (openNeon) {
                    openNeonConsole();
                }
                return;
            }

            if (!databaseUrl.startsWith('postgresql://')) {
                alert('ì˜¬ë°”ë¥¸ PostgreSQL ì—°ê²° ë¬¸ìì—´ì„ ì…ë ¥í•´ì£¼ì„¸ìš”\n\ní˜•ì‹: postgresql://username:password@host/database');
                return;
            }

            // GitHub URLì—ì„œ í•„ìš”í•œ ì •ë³´ ì¶”ì¶œ
            const repoPath = githubUrl.replace('https://github.com/', '').replace('.git', '');
            const repoName = repoPath.split('/').pop();

            // Vercel Deploy URL ìƒì„±
            const deployUrl = new URL('https://vercel.com/new/clone');
            deployUrl.searchParams.set('repository-url', githubUrl);
            deployUrl.searchParams.set('repository-name', repoName);
            deployUrl.searchParams.set('project-name', repoName);

            // í™˜ê²½ ë³€ìˆ˜ ì´ë¦„ ì§€ì • (DATABASE_URLë§Œ í•„ìˆ˜)
            deployUrl.searchParams.set('env', 'DATABASE_URL');

            // í™˜ê²½ ë³€ìˆ˜ ê°’ ì§ì ‘ ì „ë‹¬
            deployUrl.searchParams.set('envDescription', 'Enter your Neon DATABASE_URL. API key is optional and can be added later in Vercel dashboard.');
            deployUrl.searchParams.set('envLink', `${githubUrl}/blob/song/README.md`);

            // íŒì—…ì— í™˜ê²½ ë³€ìˆ˜ ê°’ í‘œì‹œ
            document.getElementById('popup-db-url').textContent = databaseUrl;
            document.getElementById('popup-api-key').textContent = apiKey || '(ë¹„ì›Œë‘ì–´ë„ ë©ë‹ˆë‹¤)';

            // API í‚¤ê°€ ì—†ìœ¼ë©´ í•´ë‹¹ í•­ëª© ìˆ¨ê¹€
            if (!apiKey) {
                document.getElementById('popup-api-key-item').style.display = 'none';
            } else {
                document.getElementById('popup-api-key-item').style.display = 'block';
            }

            // ìƒˆ ì°½ì—ì„œ Vercel ë°°í¬ í˜ì´ì§€ ì—´ê¸°
            window.open(deployUrl.toString(), '_blank');

            // íŒì—… í‘œì‹œ
            document.getElementById('popup-overlay').classList.add('show');
        }

        function closePopup(event) {
            // ì˜¤ë²„ë ˆì´ë¥¼ í´ë¦­í–ˆê±°ë‚˜ ë‹«ê¸° ë²„íŠ¼ì„ í´ë¦­í•œ ê²½ìš°ì—ë§Œ ë‹«ê¸°
            if (!event || event.target.id === 'popup-overlay' || event.target.className === 'close-btn') {
                document.getElementById('popup-overlay').classList.remove('show');
            }
        }

        function copyToClipboard(elementId, button) {
            const text = document.getElementById(elementId).textContent;

            if (text === '(ë¹„ì›Œë‘ì–´ë„ ë©ë‹ˆë‹¤)') {
                alert('ì´ í•„ë“œëŠ” ë¹„ì›Œë‘ì–´ë„ ë©ë‹ˆë‹¤');
                return;
            }

            navigator.clipboard.writeText(text).then(() => {
                // ë²„íŠ¼ í…ìŠ¤íŠ¸ ë³€ê²½
                const originalText = button.textContent;
                button.textContent = 'âœ… ë³µì‚¬ë¨!';
                button.classList.add('copied');

                // 2ì´ˆ í›„ ì›ë˜ëŒ€ë¡œ
                setTimeout(() => {
                    button.textContent = originalText;
                    button.classList.remove('copied');
                }, 2000);
            }).catch(() => {
                alert('ë³µì‚¬ ì‹¤íŒ¨! ìˆ˜ë™ìœ¼ë¡œ ë³µì‚¬í•´ì£¼ì„¸ìš”:\n' + text);
            });
        }

        // Enter í‚¤ë¡œë„ ë°°í¬ ê°€ëŠ¥í•˜ë„ë¡
        document.getElementById('github-url').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                deployToVercel();
            }
        });
    </script>
</body>
</html>
